/******************************************************************************/
/*    Copyright (c) 2016 MD Automotive Controls. Original Work.               */
/*    License: http://www.gnu.org/licenses/gpl.html GPL version 2 or higher   */
/******************************************************************************/
/* CONTEXT:USER_APP                                                           */
/* PACKAGE TITLE:      User Math Header File                                  */
/* DESCRIPTION:        This code module provides mathematical data filtering  */
/*                     functions for the user application                     */
/* FILE NAME:          USERMATH.h                                             */
/* REVISION HISTORY:   07-03-2016 | 1.0 | Initial revision                    */
/*                                                                            */
/*                                                                            */
/*                                                                            */
/*                                                                            */
/******************************************************************************/
#ifndef USERMATH_H
#define USERMATH_H

#include <limits.h>
#include <stddef.h>
#include <stdint.h>
#include <string.h>
#include "declarations.h"
#include "sys.h"
#include "types.h"


/* GLOBAL MACRO DEFINITIONS ***************************************************/
#define MIN(a, b)		((a) > (b)) ? (b) : (a)
#define MAX(a, b)		((a) < (b)) ? (b) : (a)
#define ABS(a)   		(((a) > 0) 	? (a) : (-a))

#define USERMATH_nTimeConstantData\
{\
0x1,\
0x1,\
0x1,\
0x1,\
0x1,\
0x1,\
0x1,\
0x1,\
0xB,\
0x1F,\
0x32,\
0x43,\
0x52,\
0x60,\
0x6D,\
0x7A,\
0x82,\
0x88,\
0x8D,\
0x92,\
0x96,\
0x9B,\
0x9F,\
0xA3,\
0xA7,\
0xAB,\
0xAE,\
0xB2,\
0xB5,\
0xB8,\
0xBB,\
0xBE,\
0xC0,\
0xC2,\
0xC3,\
0xC4,\
0xC6,\
0xC7,\
0xC8,\
0xC9,\
0xCA,\
0xCC,\
0xCD,\
0xCE,\
0xCF,\
0xD0,\
0xD1,\
0xD2,\
0xD3,\
0xD4,\
0xD5,\
0xD5,\
0xD6,\
0xD7,\
0xD8,\
0xD9,\
0xDA,\
0xDB,\
0xDB,\
0xDC,\
0xDD,\
0xDE,\
0xDE,\
0xDF,\
0xE0,\
0xE0,\
0xE0,\
0xE1,\
0xE1,\
0xE1,\
0xE2,\
0xE2,\
0xE2,\
0xE3,\
0xE3,\
0xE3,\
0xE4,\
0xE4,\
0xE4,\
0xE5,\
0xE5,\
0xE5,\
0xE5,\
0xE6,\
0xE6,\
0xE6,\
0xE6,\
0xE7,\
0xE7,\
0xE7,\
0xE7,\
0xE8,\
0xE8,\
0xE8,\
0xE8,\
0xE9,\
0xE9,\
0xE9,\
0xE9,\
0xEA,\
0xEA,\
0xEA,\
0xEA,\
0xEB,\
0xEB,\
0xEB,\
0xEB,\
0xEB,\
0xEC,\
0xEC,\
0xEC,\
0xEC,\
0xED,\
0xED,\
0xED,\
0xED,\
0xED,\
0xEE,\
0xEE,\
0xEE,\
0xEE,\
0xEE,\
0xEE,\
0xEF,\
0xEF,\
0xEF,\
0xEF,\
0xEF,\
0xF0,\
0xF0,\
0xF0,\
0xF0,\
0xF0,\
0xF0,\
0xF0,\
0xF0,\
0xF0,\
0xF0,\
0xF0,\
0xF0,\
0xF1,\
0xF1,\
0xF1,\
0xF1,\
0xF1,\
0xF1,\
0xF1,\
0xF1,\
0xF1,\
0xF1,\
0xF1,\
0xF1,\
0xF2,\
0xF2,\
0xF2,\
0xF2,\
0xF2,\
0xF2,\
0xF2,\
0xF2,\
0xF2,\
0xF2,\
0xF2,\
0xF2,\
0xF2,\
0xF2,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF3,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF4,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF5,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF6,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF7,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF8,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xF9,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFA,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFB,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFC,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFD,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
0xFE,\
}

#define USERMATH_nSQRT_DATA	\
{0,   \
31,   \
44,   \
54,   \
63,   \
70,   \
77,   \
83,   \
89,   \
94,   \
100,   \
104,   \
109,   \
114,   \
118,   \
122,   \
126,   \
130,   \
134,   \
137,   \
141,   \
144,   \
148,   \
151,   \
154,   \
158,   \
161,   \
164,   \
167,   \
170,   \
173,   \
176,   \
178,   \
181,   \
184,   \
187,   \
189,   \
192,   \
194,   \
197,   \
200,   \
202,   \
204,   \
207,   \
209,   \
212,   \
214,   \
216,   \
219,   \
221,   \
223,   \
225,   \
228,   \
230,   \
232,   \
234,   \
236,   \
238,   \
240,   \
242,   \
244,   \
246,   \
248,   \
250,   \
252,   \
254,   \
256,   \
258,   \
260,   \
262,   \
264,   \
266,   \
268,   \
270,   \
272,   \
273,   \
275,   \
277,   \
279,   \
281,   \
282,   \
284,   \
286,   \
288,   \
289,   \
291,   \
293,   \
294,   \
296,   \
298,   \
300,   \
301,   \
303,   \
304,   \
306,   \
308,   \
309,   \
311,   \
313,   \
314,   \
316,   \
317,   \
319,   \
320,   \
322,   \
324,   \
325,   \
327,   \
328,   \
330,   \
331,   \
333,   \
334,   \
336,   \
337,   \
339,   \
340,   \
342,   \
343,   \
344,   \
346,   \
347,   \
349,   \
350,   \
352,   \
353,   \
354,   \
356,   \
357,   \
359,   \
360,   \
361,   \
363,   \
364,   \
366,   \
367,   \
368,   \
370,   \
371,   \
372,   \
374,   \
375,   \
376,   \
378,   \
379,   \
380,   \
382,   \
383,   \
384,   \
386,   \
387,   \
388,   \
389,   \
391,   \
392,   \
393,   \
394,   \
396,   \
397,   \
398,   \
400,   \
401,   \
402,   \
403,   \
404,   \
406,   \
407,   \
408,   \
409,   \
411,   \
412,   \
413,   \
414,   \
415,   \
417,   \
418,   \
419,   \
420,   \
421,   \
423,   \
424,   \
425,   \
426,   \
427,   \
428,   \
430,   \
431,   \
432,   \
433,   \
434,   \
435,   \
437,   \
438,   \
439,   \
440,   \
441,   \
442,   \
443,   \
444,   \
446,   \
447,   \
448,   \
449,   \
450,   \
451,   \
452,   \
453,   \
454,   \
456,   \
457,   \
458,   \
459,   \
460,   \
461,   \
462,   \
463,   \
464,   \
465,   \
466,   \
467,   \
469,   \
470,   \
471,   \
472,   \
473,   \
474,   \
475,   \
476,   \
477,   \
478,   \
479,   \
480,   \
481,   \
482,   \
483,   \
484,   \
485,   \
486,   \
487,   \
488,   \
489,   \
490,   \
491,   \
492,   \
493,   \
494,   \
495,   \
496,   \
497,   \
498,   \
500,   \
500,   \
501,   \
502,   \
503,   \
504,   \
505,   \
506,   \
507,   \
508,   \
509,   \
510,   \
511,   \
512,   \
513,   \
514,   \
515,   \
516,   \
517,   \
518,   \
519,   \
520,   \
521,   \
522,   \
523,   \
524,   \
525,   \
526,   \
527,   \
528,   \
529,   \
530,   \
531,   \
531,   \
532,   \
533,   \
534,   \
535,   \
536,   \
537,   \
538,   \
539,   \
540,   \
541,   \
542,   \
543,   \
544,   \
544,   \
545,   \
546,   \
547,   \
548,   \
549,   \
550,   \
551,   \
552,   \
553,   \
554,   \
554,   \
555,   \
556,   \
557,   \
558,   \
559,   \
560,   \
561,   \
562,   \
563,   \
563,   \
564,   \
565,   \
566,   \
567,   \
568,   \
569,   \
570,   \
570,   \
571,   \
572,   \
573,   \
574,   \
575,   \
576,   \
577,   \
577,   \
578,   \
579,   \
580,   \
581,   \
582,   \
583,   \
583,   \
584,   \
585,   \
586,   \
587,   \
588,   \
589,   \
589,   \
590,   \
591,   \
592,   \
593,   \
594,   \
594,   \
595,   \
596,   \
597,   \
598,   \
599,   \
600,   \
600,   \
601,   \
602,   \
603,   \
604,   \
604,   \
605,   \
606,   \
607,   \
608,   \
609,   \
609,   \
610,   \
611,   \
612,   \
613,   \
614,   \
614,   \
615,   \
616,   \
617,   \
618,   \
618,   \
619,   \
620,   \
621,   \
622,   \
622,   \
623,   \
624,   \
625,   \
626,   \
626,   \
627,   \
628,   \
629,   \
630,   \
630,   \
631,   \
632,   \
633,   \
634,   \
634,   \
635,   \
636,   \
637,   \
637,   \
638,   \
639,   \
640,   \
641,   \
641,   \
642,   \
643,   \
644,   \
644,   \
645,   \
646,   \
647,   \
648,   \
648,   \
649,   \
650,   \
651,   \
651,   \
652,   \
653,   \
654,   \
654,   \
655,   \
656,   \
657,   \
658,   \
658,   \
659,   \
660,   \
661,   \
661,   \
662,   \
663,   \
664,   \
664,   \
665,   \
666,   \
667,   \
667,   \
668,   \
669,   \
670,   \
670,   \
671,   \
672,   \
673,   \
673,   \
674,   \
675,   \
676,   \
676,   \
677,   \
678,   \
678,   \
679,   \
680,   \
681,   \
681,   \
682,   \
683,   \
684,   \
684,   \
685,   \
686,   \
687,   \
687,   \
688,   \
689,   \
689,   \
690,   \
691,   \
692,   \
692,   \
693,   \
694,   \
694,   \
695,   \
696,   \
697,   \
697,   \
698,   \
699,   \
700,   \
700,   \
701,   \
702,   \
702,   \
703,   \
704,   \
704,   \
705,   \
706,   \
707,   \
707,   \
708,   \
709,   \
709,   \
710,   \
711,   \
712,   \
712,   \
713,   \
714,   \
714,   \
715,   \
716,   \
716,   \
717,   \
718,   \
719,   \
719,   \
720,   \
721,   \
721,   \
722,   \
723,   \
723,   \
724,   \
725,   \
725,   \
726,   \
727,   \
728,   \
728,   \
729,   \
730,   \
730,   \
731,   \
732,   \
732,   \
733,   \
734,   \
734,   \
735,   \
736,   \
736,   \
737,   \
738,   \
738,   \
739,   \
740,   \
740,   \
741,   \
742,   \
742,   \
743,   \
744,   \
744,   \
745,   \
746,   \
746,   \
747,   \
748,   \
748,   \
749,   \
750,   \
750,   \
751,   \
752,   \
752,   \
753,   \
754,   \
754,   \
755,   \
756,   \
756,   \
757,   \
758,   \
758,   \
759,   \
760,   \
760,   \
761,   \
762,   \
762,   \
763,   \
764,   \
764,   \
765,   \
766,   \
766,   \
767,   \
768,   \
768,   \
769,   \
770,   \
770,   \
771,   \
772,   \
772,   \
773,   \
773,   \
774,   \
775,   \
775,   \
776,   \
777,   \
777,   \
778,   \
779,   \
779,   \
780,   \
781,   \
781,   \
782,   \
782,   \
783,   \
784,   \
784,   \
785,   \
786,   \
786,   \
787,   \
788,   \
788,   \
789,   \
789,   \
790,   \
791,   \
791,   \
792,   \
793,   \
793,   \
794,   \
794,   \
795,   \
796,   \
796,   \
797,   \
798,   \
798,   \
799,   \
800,   \
800,   \
801,   \
801,   \
802,   \
803,   \
803,   \
804,   \
804,   \
805,   \
806,   \
806,   \
807,   \
808,   \
808,   \
809,   \
809,   \
810,   \
811,   \
811,   \
812,   \
813,   \
813,   \
814,   \
814,   \
815,   \
816,   \
816,   \
817,   \
817,   \
818,   \
819,   \
819,   \
820,   \
820,   \
821,   \
822,   \
822,   \
823,   \
824,   \
824,   \
825,   \
825,   \
826,   \
827,   \
827,   \
828,   \
828,   \
829,   \
830,   \
830,   \
831,   \
831,   \
832,   \
833,   \
833,   \
834,   \
834,   \
835,   \
836,   \
836,   \
837,   \
837,   \
838,   \
839,   \
839,   \
840,   \
840,   \
841,   \
842,   \
842,   \
843,   \
843,   \
844,   \
844,   \
845,   \
846,   \
846,   \
847,   \
847,   \
848,   \
849,   \
849,   \
850,   \
850,   \
851,   \
852,   \
852,   \
853,   \
853,   \
854,   \
854,   \
855,   \
856,   \
856,   \
857,   \
857,   \
858,   \
859,   \
859,   \
860,   \
860,   \
861,   \
861,   \
862,   \
863,   \
863,   \
864,   \
864,   \
865,   \
866,   \
866,   \
867,   \
867,   \
868,   \
868,   \
869,   \
870,   \
870,   \
871,   \
871,   \
872,   \
872,   \
873,   \
874,   \
874,   \
875,   \
875,   \
876,   \
876,   \
877,   \
878,   \
878,   \
879,   \
879,   \
880,   \
880,   \
881,   \
882,   \
882,   \
883,   \
883,   \
884,   \
884,   \
885,   \
886,   \
886,   \
887,   \
887,   \
888,   \
888,   \
889,   \
889,   \
890,   \
891,   \
891,   \
892,   \
892,   \
893,   \
893,   \
894,   \
894,   \
895,   \
896,   \
896,   \
897,   \
897,   \
898,   \
898,   \
899,   \
900,   \
900,   \
901,   \
901,   \
902,   \
902,   \
903,   \
903,   \
904,   \
904,   \
905,   \
906,   \
906,   \
907,   \
907,   \
908,   \
908,   \
909,   \
909,   \
910,   \
911,   \
911,   \
912,   \
912,   \
913,   \
913,   \
914,   \
914,   \
915,   \
915,   \
916,   \
917,   \
917,   \
918,   \
918,   \
919,   \
919,   \
920,   \
920,   \
921,   \
921,   \
922,   \
923,   \
923,   \
924,   \
924,   \
925,   \
925,   \
926,   \
926,   \
927,   \
927,   \
928,   \
928,   \
929,   \
930,   \
930,   \
931,   \
931,   \
932,   \
932,   \
933,   \
933,   \
934,   \
934,   \
935,   \
935,   \
936,   \
937,   \
937,   \
938,   \
938,   \
939,   \
939,   \
940,   \
940,   \
941,   \
941,   \
942,   \
942,   \
943,   \
943,   \
944,   \
944,   \
945,   \
946,   \
946,   \
947,   \
947,   \
948,   \
948,   \
949,   \
949,   \
950,   \
950,   \
951,   \
951,   \
952,   \
952,   \
953,   \
953,   \
954,   \
954,   \
955,   \
956,   \
956,   \
957,   \
957,   \
958,   \
958,   \
959,   \
959,   \
960,   \
960,   \
961,   \
961,   \
962,   \
962,   \
963,   \
963,   \
964,   \
964,   \
965,   \
965,   \
966,   \
966,   \
967,   \
967,   \
968,   \
969,   \
969,   \
970,   \
970,   \
971,   \
971,   \
972,   \
972,   \
973,   \
973,   \
974,   \
974,   \
975,   \
975,   \
976,   \
976,   \
977,   \
977,   \
978,   \
978,   \
979,   \
979,   \
980,   \
980,   \
981,   \
981,   \
982,   \
982,   \
983,   \
983,   \
984,   \
984,   \
985,   \
985,   \
986,   \
986,   \
987,   \
987,   \
988,   \
988,   \
989,   \
989,   \
990,   \
990,   \
991,   \
991,   \
992,   \
992,   \
993,   \
993,   \
994,   \
994,   \
995,   \
995,   \
996,   \
996,   \
997,   \
997,   \
998,   \
998,   \
999}


/* GLOBAL FUNCTION DECLARATIONS ***********************************************/
uint8 USERMATH_u8GetFilterFromTimeConstant(uint32, uint32);
uint16 USERMATH_u16SinglePoleLowPassFilter16(uint16 u16NewVal, uint8 u8FilterWeight, puint32 pu32FilterVal);/*CR1_1*/
uint32 USERMATH_u32SinglePoleLowPassFilter32(uint32 u32NewVal, uint8 u8FilterWeight, puint32 pu32FilterVal);/*CR1_1*/
uint32 USERMATH_u32DiscardAndAverage32(puint32 pu32Samples, uint32 u32SampleCount, uint32 u32DiscardCount);/*CR1_1*/
sint32 USERMATH_s32DiscardAndAverage32(psint32 ps32Samples, uint32 u32SampleCount, uint32 u32DiscardCount);/*CR1_1*/
uint32 USERMATH_u32GetSquareRoot(uint32 u32Fraction);

#endif // UNITS_H

